{% extends "base.html" %}

{% load static %}
{% block title %}Kalender Akademik UMS{% endblock %}

{% block extra_head %}
<!--    <link rel="stylesheet" href="{% static 'kalender/css/style-kaldik.css' %}">-->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
{% endblock %}

{% block content %}
<main class="main-container">
    <section class="calendar-section">
        <h2 class="calendar-title">KALENDER AKADEMIK 2024/2025</h2>
        <div id="calendar"></div>
    </section>

    <section class="agenda-section">
        <h3 class="agenda-title">Agenda Akademik</h3>
        <input type="text" placeholder="cari agenda..." class="search-box form-control mb-3" />
        <div class="agenda-item">
            <h4 class="agenda-item-title">Revisi KRS</h4>
            <p class="agenda-item-detail">Tanggal: 3 - 9 Maret 2025</p>
            <p class="agenda-item-detail">Lokasi: Gedung Siti Walidah</p>
            <span class="icon">ðŸ””</span>
        </div>
        <div class="agenda-item">
            <h4 class="agenda-item-title">Hari Kerja Efektif</h4>
            <p class="agenda-item-detail">Tanggal: 10 Maret 2025</p>
            <span class="icon">ðŸ””</span>
        </div>
    </section>
</main>
<script src="{% static 'scripts.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            initialDate: '2025-03-17',
            headerToolbar: {
                left: 'prev',
                center: 'title',
                right: 'next'
            },
            events: [
                { title: 'Revisi KRS', start: '2025-03-03', end: '2025-03-10', classNames: ['red-day'], extendedProps: { location: 'Gedung Siti Walidah' } },
                { title: 'Hari Kerja Efektif', start: '2025-03-10', allDay: true, classNames: ['red-day'] }
            ],
            dayCellContent: function(arg) {
                var date = arg.date;
                var day = date.getDate();
                return { html: '<div class="day' + (date < new Date('2025-03-01') || date > new Date('2025-03-31') ? ' inactive' : '') + '">' + day + '</div>' };
            },
            dayCellClassNames: function(arg) {
                var date = arg.date;
                var day = date.getDate();
                if ([2, 9, 16, 23, 30].includes(day) && date.getMonth() === 2) {
                    return ['red-day'];
                }
                return [];
            },
            eventContent: function(arg) {
                return { html: '<b>' + arg.event.title + '</b><br>' + (arg.event.extendedProps.location ? arg.event.extendedProps.location : '') };
            }
        });
        calendar.render();
    });
</script>
{% endblock %}