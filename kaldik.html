<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Kalender Akademik UMS</title>
  <link rel="stylesheet" href="style-kaldik.css" />
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="header-left">
      <h1><strong>UMS</strong> Universitas Muhammadiyah Surakarta</h1>
    </div>
    <div class="header-right">
      <a href="#" class="active">Beranda</a>
      <a href="#">Kalender Akademik</a>
      <a href="#">Tentang</a>
    </div>
  </header>

  <!-- Main content -->
  <div class="main-container">
    <div id="calendar"></div>

    <div class="agenda-section">
      <h2>Agenda Akademik</h2>
      <input type="text" id="search" placeholder="cari agenda..." onkeyup="filterAgenda()">
      <div id="agenda-container"></div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const calendarEl = document.getElementById('calendar');
      const agendaContainer = document.getElementById('agenda-container');

      const eventsData = [
        {
          title: 'Revisi KRS',
          start: '2025-03-03',
          end: '2025-03-09',
          description: 'Gedung Siti Walidah',
        },
        {
          title: 'Hari Kerja Efektif',
          start: '2025-03-10',
          description: '',
        }
      ];

      const calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        initialDate: '2025-03-01',
        locale: 'id',
        events: eventsData,
      });

      calendar.render();

      function renderAgenda(agendaList) {
        agendaContainer.innerHTML = agendaList.map(agenda => `
          <div class="agenda-item">
            <div class="btn-bell" onclick="notify('${agenda.title}', '${agenda.start}')">ðŸ””</div>
            <div class="agenda-item-title">${agenda.title}</div>
            <div class="agenda-date">Tanggal: ${agenda.start}</div>
            ${agenda.description ? `<div class="agenda-location">Lokasi: ${agenda.description}</div>` : ''}
            <div class="btn-gcal" onclick="addToGoogleCalendar('${agenda.title}', '${agenda.start}')">Tambahkan ke Google Calendar</div>
          </div>
        `).join('');
      }

      const agendaData = eventsData.map(e => ({
        title: e.title,
        start: e.start,
        description: e.description
      }));

      renderAgenda(agendaData);

      window.filterAgenda = function () {
        const q = document.getElementById('search').value.toLowerCase();
        const filtered = agendaData.filter(a => a.title.toLowerCase().includes(q));
        renderAgenda(filtered);
      };

      window.addToGoogleCalendar = function (title, date) {
        const cleanDate = date.replace(/-/g, '');
        const url = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(title)}&dates=${cleanDate}/${cleanDate}`;
        window.open(url, '_blank');
      };

      window.notify = function (title, date) {
        alert(`Pengingat untuk agenda "${title}" pada tanggal ${date}`);
      };
    });
  </script>

</body>
</html>
